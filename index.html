<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>lets make a todo app</title>
		<meta viewport="width=device-width, initial-scale=1" />
	</head>
	<body>

<script>

 	let listCount = 0;
	const todoList = [];

 	let allDone = () => {
		document.body.style.backgroundColor= 'black';
		document.body.style.color= 'white';
	};

 	let checkList = () => {

    let done = 0;
	 for(let i=0; i < todoList.length ; i++){
		 if(todoList[i].lastChild.checked){
			 done++
		     }
	        }
		if(done == todoList.length){
			allDone();
		}
      };

	let addToList = () => {
		listCount++;

		let newEl = document.createElement('li');
		let newTodo = document.createTextNode(document.getElementById("todoItem").value);
			newEl.appendChild(newTodo);
		let position = document.getElementById('todoList');
			position.appendChild(newEl).insertAdjacentHTML('beforeend', `<input id="tickBox${listCount}" type="checkbox" />`);
			todoList.push(newEl);

        watch();
			};

    let watch = () => {

        if(listCount > 0){
	        let ticked = document.getElementById(`tickBox${listCount}`);
            ticked.addEventListener('change', checkList);
            };
        }

    let finished = () =>{
        console.log('now you are here')
        let clearList = document.getElementById("todoList");
        while(clearList.firstChild){
            clearList.removeChild(clearList.lastChild);
            }
        document.body.style.backgroundColor= 'white';
        document.body.style.color= 'black';
        }

</script>


	<h1>This is the todo list</h1>
	  <input id="todoItem" type="text" />
	  <input type="submit" value="add" onclick="addToList()" />

	<ol id="todoList" labelledby="List">
	</ol>

		<input type="submit" value="finished?" onclick="finished()" />




	</body>
</html>
